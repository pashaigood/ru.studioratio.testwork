!function(){"use strict";angular.module("testwork",["ui.bootstrap","ngStorage"])}(),function(){"use strict";angular.module("testwork").directive("timeFormat",["$compile",function(t){return{scope:{millis:"=timeFormat"},controller:["$scope","$element",function(s,e){function a(){s.maxTimeUnit&&"day"!==s.maxTimeUnit?"second"===s.maxTimeUnit?(s.seconds=Math.floor(s.millis/1e3),s.minutes=0,s.hours=0,s.days=0,s.months=0,s.years=0):"minute"===s.maxTimeUnit?(s.seconds=Math.floor(s.millis/1e3%60),s.minutes=Math.floor(s.millis/6e4),s.hours=0,s.days=0,s.months=0,s.years=0):"hour"===s.maxTimeUnit?(s.seconds=Math.floor(s.millis/1e3%60),s.minutes=Math.floor(s.millis/6e4%60),s.hours=Math.floor(s.millis/36e5),s.days=0,s.months=0,s.years=0):"month"===s.maxTimeUnit?(s.seconds=Math.floor(s.millis/1e3%60),s.minutes=Math.floor(s.millis/6e4%60),s.hours=Math.floor(s.millis/36e5%24),s.days=Math.floor(s.millis/36e5/24%30),s.months=Math.floor(s.millis/36e5/24/30),s.years=0):"year"===s.maxTimeUnit&&(s.seconds=Math.floor(s.millis/1e3%60),s.minutes=Math.floor(s.millis/6e4%60),s.hours=Math.floor(s.millis/36e5%24),s.days=Math.floor(s.millis/36e5/24%30),s.months=Math.floor(s.millis/36e5/24/30%12),s.years=Math.floor(s.millis/36e5/24/365)):(s.seconds=Math.floor(s.millis/1e3%60),s.minutes=Math.floor(s.millis/6e4%60),s.hours=Math.floor(s.millis/36e5%24),s.days=Math.floor(s.millis/36e5/24),s.months=0,s.years=0),s.secondsS=1==s.seconds?"":"s",s.minutesS=1==s.minutes?"":"s",s.hoursS=1==s.hours?"":"s",s.daysS=1==s.days?"":"s",s.monthsS=1==s.months?"":"s",s.yearsS=1==s.years?"":"s",s.sseconds=s.seconds<10?"0"+s.seconds:s.seconds,s.mminutes=s.minutes<10?"0"+s.minutes:s.minutes,s.hhours=s.hours<10?"0"+s.hours:s.hours,s.ddays=s.days<10?"0"+s.days:s.days,s.mmonths=s.months<10?"0"+s.months:s.months,s.yyears=s.years<10?"0"+s.years:s.years}e.append(t(e.contents())(s)),s.$watch("millis",function(){a(s)})}]}}])}(),function(){"use strict";angular.module("testwork").service("tasksService",["$localStorage","taskFactory",function(t,s){t.$default({tasks:[]});for(var e=t.tasks.length;--e>-1;)t.tasks[e]=s(t.tasks[e]);return t.tasks}])}(),function(){"use strict";function t(){function t(t,s,e,a){function n(){o(),s(o,1e3)}function o(){t.timestamp=Date.now();for(var s=t.tasks.length;--s>-1;)t.tasks[s].check(t.timestamp)||t.remove(t.tasks[s])}t.tasks=e,t.timestamp=Date.now(),t.remove=function(s){var e=t.tasks.indexOf(s);e>-1&&t.tasks.splice(e,1)},t.addMinutes=function(t,s){s=s||a,t.addMinutes(s)},n()}var s={restrict:"E",templateUrl:"app/components/tasks/tasks.html",controller:t,bindToController:!0};return t.$inject=["$scope","$interval","tasksService","addingMinutes"],s}angular.module("testwork").directive("tasks",t)}(),function(){"use strict";angular.module("testwork").factory("taskFactory",["addingMinutes","oneMinute","addingMinutesBeforeRemove",function(t,s,e){function a(t){t.date=new Date(t.date);var e=this;angular.extend(e,t);var a=s/60;e.date=new Date(Math.round(e.date/a)*a)}return angular.extend(a.prototype,{title:"",desc:"",status:0,check:function(t){var s=this;if(t=t||Date.now(),t>s.date.getTime())switch(s.status){case 0:return s.addMinutes(e,t),s.status=1,!0;case 1:return!1}return!0},addMinutes:function(t,e){var a=this;e=e||a.date.getTime(),a.date=new Date(e+t*s),a.status=0}}),function(e){return e=e||{date:Date.now()+t*s},new a(e)}}])}(),function(){"use strict";function t(){function t(t,s,e,a){var n=this;t.task=e(),n.add=function(){return t.newTask?void(t.newTask.$valid?(a.push(t.task),t.task.check(),t.task=e(),t.newTask.$setPristine()):s.debug("not valid")):!1}}var s={restrict:"E",templateUrl:"app/components/newTask/newTask.html",controller:t,controllerAs:"form",bindToController:!0};return t.$inject=["$scope","$log","taskFactory","tasksService"],s}angular.module("testwork").directive("newTask",t)}(),function(){"use strict";function t(){}angular.module("testwork").controller("MainController",t)}(),function(){"use strict";function t(t){t.debug("runBlock end")}angular.module("testwork").run(t),t.$inject=["$log"]}(),function(){"use strict";angular.module("testwork").constant("addingMinutes",10).constant("addingMinutesBeforeRemove",2).constant("oneMinute",6e4)}(),function(){"use strict";function t(t){t.debugEnabled(!0)}angular.module("testwork").config(t),t.$inject=["$logProvider"]}(),angular.module("testwork").run(["$templateCache",function(t){t.put("app/components/newTask/newTask.html",'<form name="newTask" ng-submit="form.add()" novalidate=""><h1>Добавить задачу</h1><div class="form-group" ng-class="{\'has-error\':(isNameValid = (newTask.name.$dirty && newTask.name.$invalid))}"><label>Название задачи</label> <input type="text" name="name" ng-model="task.title" required="" class="form-control" placeholder="Захват мира!"><p class="help-block has-error" ng-show="isNameValid">Назовите, то чем займётесь!</p></div><div class="form-group"><label>Описание</label> <textarea ng-model="task.desc" placeholder="Вы можете как написать, так и не неписать его." class="form-control" rows="5"></textarea></div><div class="form-group" ng-class="{\'has-error\':(isDateValid = (newTask.date.$dirty && newTask.date.$invalid))}"><label>Дата и время окончания</label><div class="row"><div class="col-xs-6"><input type="date" name="date" ng-model="task.date" required="" min="task.date" class="form-control"></div><div class="col-xs-6"><input type="time" name="time" ng-model="task.date" class="form-control"></div></div><p class="help-block" ng-show="isDateValid">Любая задача должна когда-нибудь закончится.</p></div><button ng-disabled="newTask.$invalid" type="submit" class="btn btn-default">Добавить</button></form>'),t.put("app/components/tasks/tasks.html",'<h2>Список задач <span class="badge" ng-bind="tasks.length"></span></h2><ul class="list-unstyled"><li ng-repeat="task in tasks | orderBy : \'date\' : false track by $index"><div class="panel" ng-class="{\'panel-danger\': task.status, \'panel-primary\': !task.status}"><div class="panel-heading"><h3 class="panel-title"><div class="row"><div class="col-xs-9" ng-bind="task.title"></div><div time-format="task.date.getTime()-timestamp" class="col-xs-3 text-nowrap text-right"><span ng-show="days > 0">дни: {{days}}</span> <span ng-show="days == 0">{{hhours}}:{{mminutes}}:{{sseconds}}</span></div></div></h3></div><div class="panel-body clearfix"><div class="pull-left btn-group"><span class="btn btn-info btn-sm" ng-if="task.desc.length" popover="{{task.desc}}" popover-trigger="mouseenter" popover-placement="bottom">Подробнее</span></div><div class="text-right pull-right"><button type="button" class="btn btn-default btn-sm" ng-click="addMinutes(task)">Добавить 10 минут</button> <button type="button" class="btn btn-danger btn-sm" ng-click="remove(task)">Удалить</button></div></div></div></li></ul>')}]);
//# sourceMappingURL=../maps/scripts/app-e3ae4fe3fc.js.map